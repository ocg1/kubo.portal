package mx.com.kubo.mesa.solicitud.perfil.domicilio;

import mx.com.kubo.model.Address;
import mx.com.kubo.model.Residence;
import mx.com.kubo.model.ResidencePK;

public abstract class AddressTokenDMO 
implements AddressTokenIMO
{	
	protected Residence   residence;
	protected ResidencePK residence_PK;
	
	protected Address address;
	
	protected StringBuilder sb;
	
	protected String address_TOKEN;
	protected String antiguedad;
	protected String residence_TOKEN;
	protected String street;
	protected String address_number;
	protected String apt_number;
	protected String mx_manzana;
	protected String mx_lote;
	protected String colonia;
	protected String town;
	protected String estado;
	protected String zip_code;
	protected String first_street_reference;
	protected String second_street_reference;
	protected String description;
	
	protected int company_id;
	
	protected AddressTokenDMO()
	{				
		company_id = 1;
		
		residence_TOKEN  = "";
		street           = "";
		address_number   = "";
		apt_number       = "";
		mx_manzana       = "";
		mx_lote          = "";
		colonia          = "";
		town             = "";
		estado           = "";
		zip_code         = "";
		description      = "";
		first_street_reference = "";
		second_street_reference = "";		
	}

	public final void setResidence(Residence residence) 
	{
		this.residence = residence;
		
		if(residence != null)
		{		
			residence_TOKEN = residence.getDescription().toLowerCase();			
		}
	}
	
	public final void setAntiguedad(Integer length_residence)
	{					
		 if(length_residence == null)
		 {
			 antiguedad = "";
			 
		 } else if (length_residence == 1) {
			 
			 antiguedad = length_residence + " año ";
				 
		 } else {
			
			 antiguedad = length_residence + " años ";
		 }
	}

	public final void setAddress(Address address) 
	{
		this.address = address;
		
		if(address != null)
		{
			init_address();
		}
	}

	private void init_address() 
	{
		
		if(address.getStreet() != null && address.getStreet().length() > 0)
		{
			street = " " + address.getStreet();
		} 
		
		if(address.getAddress_number() != null && address.getAddress_number().length() > 0)
		{
			address_number = " número " + address.getAddress_number();
		}
		
		if(address.getApt_number() != null && address.getApt_number().length() > 0)
		{
			apt_number = " número interior " + address.getApt_number();
		}
		
		if(address.getMx_manzana() != null && address.getMx_manzana().length() > 0)
		{
			mx_manzana = " manzana " + address.getMx_manzana();
		}
		
		if(address.getMx_lote() != null && address.getMx_lote().length() > 0)
		{
			mx_lote = " lote " + address.getMx_lote();
		}
		
		if(address.getNeighborhood() != null)
		{
			colonia = ", colonia " + address.getNeighborhood().getName();			
		} 
		
		if(address.getNeighborhood_text() != null) 
		{			
			colonia = ", colonia " + address.getNeighborhood_text();			
		}
		
		if(address.getTownCat() != null)
		{
			if(address.getStateCat() != null && address.getStateCat().getStateCatPK().getState_id() == 9)
			{
				town = ", delegación " + address.getTownCat().getName();
				
			} else {
				
				town = ", municipio " + address.getTownCat().getName();
			}
		}
		
		if(address.getStateCat() != null)
		{
			estado = ", " + address.getStateCat().getName();
		}
		
		if(address.getZip_code() != null && address.getZip_code().length() > 0)
		{
			zip_code = ", Código Postal " + address.getZip_code();
		}
		
		if(address.getFirst_street_reference() != null && address.getSecond_street_reference() != null)
		{
			first_street_reference  = ", entre " + address.getFirst_street_reference();
			second_street_reference = " y " + address.getSecond_street_reference();
		}
		
		if(address.getDescription() != null)
		{					
			description = " , " + address.getDescription();					
		}
	}
}
