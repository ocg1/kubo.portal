console.log("js/registro/fileUpload.js");
$(window).load(function(){
	fileUploadPreview (); 
	drop_upload ();
	
});

/* funcion  ocultar botones credencial, reset al desplegar el paso, y al cargar los documentos  */
function ocultar_botones_credencial () {
	
	console.log("revision en credencial");
	
	if($("#listCredFm2 div").text().indexOf("Frente") != (-1)) {
		$(".cred_image:eq(0)").addClass("opacity");
	}
	
	if($("#listCredFm2 div").text().indexOf("Reverso") != (-1)) {
		$(".cred_image:eq(1)").addClass("opacity");
	}
	
	if($("#listCredFm2 div").text().indexOf("Pasaporte") != (-1)) {
		$(".cred_image:eq(2)").addClass("opacity");
	}
}
var estadosCuenta  = ["11", "126", "127"];
var reciboNomina   = ["10", "57", "58"];
var porHonorarios  = ["128", "129", "130"];
var declaracionImpuestos  = ["12"];

var facturas       = ["9", "48", "49"];
var contratoArrendamiento  = ["13"];
var declaracionImpuestos2  = ["14"];

var borradoMultiple = false;
var cambiandoCategoria = false;
var actividadPrevia = false;
var seleccion_actual;
var tipoDocumento;


/*intercalar documentos de la credencial conforme se cargan los docs */
var acomodoBtnCredencial = function () {

	var pasaporte_text =  $(".frente_vuelta:contains('Sube una foto de tu Pasaporte ')")
	    frente_text =     $(".frente_vuelta:contains('Sube una foto del frente de tu credencial de elector')"),
		reverso_text =    $(".frente_vuelta:contains('Sube una foto del reverso de tu credencial de elector')");
	
	var pasaporte_btn = pasaporte_text.closest("form"),
		frente_btn =    frente_text.closest("form"),
		reverso_btn = 	reverso_text.closest("form");
		
	
		$("#btns_credencial .fileupload-buttonbar").find(".ui-button-text").html("+ Subir");
		/*
		pasaporte_btn.find(".ui-button-text").html("Clic aquÃ­ para subir tu pasaporte");
		frente_btn.find(".ui-button-text").html("Clic aquÃ­ para subir el frente de tu credencial");
		reverso_btn.find(".ui-button-text").html("Clic aquÃ­ para subir el reverso de tu credencial");
	*/

	var pasaporte_doc = $("#listCredFm2 div:contains('Pasaporte')");
		frente_doc = 	$("#listCredFm2 div:contains('Frente')");	 
		reverso_doc = 	$("#listCredFm2 div:contains('Reverso')");

		pasaporte_doc.addClass("pasaporte_doc");
		frente_doc.addClass("frente_doc");
		reverso_doc.addClass("reverso_doc");
		
		acomodoBtnCredencial_docs("frente", frente_btn, frente_doc); 
		acomodoBtnCredencial_docs("reverso", reverso_btn, reverso_doc); 
		acomodoBtnCredencial_docs("pasaporte", pasaporte_btn, pasaporte_doc ); 
	
}

var acomodoBtnCredencial_docs = function (categoria, btn, doc) {
	
	if($('#btns_credencial .'+ categoria +'_doc').length > 0) {
		$('#listCredFm2 .' + categoria +'_doc img').each(function() {
			if($(this).attr("src") != $('#btns_credencial .'+categoria+'_doc img').attr("src")) {
				$(this).parent().parent().insertAfter($(btn));
				$(this).parent().parent().siblings('.'+categoria+'_doc').remove();
			}else {
				$(this).parent().parent().remove();
			}
		});
	}else {
		$(doc).insertAfter($(btn));
	}
}

/*funcion principal para cargar documentos mediante el click */
function fileUploadPreview () {
	$(".custumStlFileUploadPreview").on('change', function() {
		upload_automatic ();
	    $('.combo_tipo_doc').removeClass("seleccionar_tipo");
	});	
} 
/*funcion principal para cargar documentos mediante el drop */
var drop_upload = function () {
$('.custumStlFileUploadPreview').on(
	    'drop',
	    function(e){
	        if(e.originalEvent.dataTransfer){
	        		  upload_automatic ();
	
	        }
	    }
	)
}
/*funcion para quitar la imagen que aparece por default, cuando todavia no hay imagen cargada */
function sinimagen () {
	setTimeout(function(){
	
		if($(".imgLogoProyect img").attr("src") == "../resources/img/sinimagen.jpg") {
			$(".imgLogoProyect img").attr("src", "../resources/img/sinimagen.jpg").hide();
		}else {
		}
  	},300);
}
/* funcion para cambiar una imagen */
function ejecutaAccion(elemt, type, proyect ){
	actividadPrevia = true;
	borradoMultiple = false;
	cambiandoCategoria = false;
	 if( $(elemt).closest("div").text().indexOf("Frente") != (-1)) {
		$(".cred_image:eq(0) input.custumStlFileUploadPreview").trigger("click");
		$(".cred_image:eq(0)").addClass("opacity"); 
	}
		
    if( $(elemt).closest("div").text().indexOf("Reverso") != (-1)) {
		console.log($(elemt).closest("div").text());
		$(".cred_image:eq(1) input.custumStlFileUploadPreview").trigger("click");
		$(".cred_image:eq(1)").addClass("opacity");
	} 
    if( $(elemt).closest("div").text().indexOf("Pasaporte") != (-1)) {
		 console.log($(elemt).closest("div").text());
		$(".cred_image:eq(2) input.custumStlFileUploadPreview").trigger("click");
		$(".cred_image:eq(2)").addClass("opacity");
    } 
    
    if($(elemt).closest("form").find("select").attr("id") != "type_loan"){
    	$(elemt).closest("form").find("select").val(type);
    	$(elemt).closest("form").find("select").change();
    	$(elemt).closest("form").find("select").blur();
    }
	$(elemt).closest("form").find(".custumStlFileUploadPreview input").trigger("click");
}

/* funcion para eliminar una imagen onstart */
function eliminarElemento(elemt, compania, file, filetype, prospectus, proyect, location){
	
	$(".velo").fadeIn();
	
	
	$(".borrarDoc").addClass("show");

	  $('#cancelaBorrar').click(function(){
			$(".velo").fadeOut();
			$(".borrarDoc").removeClass("show");
	  });
	  $('#aceptaBorrar').removeAttr("onclick");
	  var functionString = "borrarDocBtn('" +compania+"' ,'"+ file+"' ,'"+ filetype+"' ,'"+ prospectus+"' ,'"+ proyect+"' ,'"+ location+"');";
	  console.log("functionString"+functionString);
	  $('#aceptaBorrar').attr("onclick", functionString);
}			


function borrarDocBtn(compania, file, filetype, prospectus, proyect, location){
		borradoMultiple = false;
		cambiandoCategoria = false;
		actividadPrevia = true;
		$(".velo").fadeOut();
		$(".borrarDoc").removeClass("show");
    	  
		displayMessageProcessing('msgprocessing',false);
		 $("#datos_eliminar").val("");
		 $("#datos_eliminar").val(compania+"::"+file+"::"+filetype+"::"+prospectus+"::"+proyect+"::"+location);
		 $("#datos_eliminar").blur();
		 console.log("se esta eliminando");	
		
}

/* funcion para eliminar una imagen oncomplete */ 
function borradoElemento () {
	
	init_listener_file_upload();
	$(".combo_tipo_doc").val("");
	fileUploadPreview ();
	
	/*if(borradoMultiple == false){*/
		closeFancy();
	/*}*/
	
}

/* funcion que da el click automatico en el boton de subir, con condiciones */ 
function upload_automatic () {
	if($("#fancybox-wrap").is(":hidden")) {
		displayMessageProcessing('msgprocessing',false);
	}
	 var testimoniosInterval = setInterval(function(){
		  if($(".template-upload").length || $(".template-upload").is(":visible")) {
			  if(!$(".template-upload").hasClass("ui-state-error")) {
				  $(".start button").click();
				  $('.combo_tipo_doc').prop('selectedIndex',0);
		          $('.combo_tipo_doc').change();
		          $('.combo_tipo_doc').removeClass("seleccionar_tipo");
		    	  ocultar_botones_credencial();
		    	  clearInterval(testimoniosInterval);
			  }else {
				 /* if(borradoMultiple == false){*/
						closeFancy();
					/*}*/
				
				  alertify.alert("Este archivo tiene un formato no vÃ¡lido. Recuerda que solo puedes subir archivos en formato JPG, PNG, o PDF.");
				  clearInterval(testimoniosInterval);
			  }
		    		 
		  }else {
		  	
		  }
	}, 1000); 
}

/* funcion que se ejecutan al llegar a este paso y cada vez que se termine de actualizar la lista de documentos cargados */ 
function actualizacionListadoDocumentos (contenedorDocumentos) {
	console.log("actualizacionListadoDocumentos");
	var resizeId;
		clearTimeout(resizeId);
		resizeId = setTimeout(acomodoBtnCredencial, 500);
		asterisk(".labelsStl");
		asterisk(".numberAndTitle");
		asterisk(".titleDisabled");
	sinimagen ();
	fileUploadPreview ();
	ocultar_botones_credencial ();
	drop_upload ();
    $('.combo_tipo_doc').removeClass("seleccionar_tipo");
  	
	if($("#fancybox-wrap").is(":visible")) {
		/*if(borradoMultiple == false){*/
			closeFancy();
		/*}*/
	
	}
	setTimeout(function(){
		if($(contenedorDocumentos+ " div").length) {
			$(contenedorDocumentos).closest("form").find(".avisoDocs").hide();
			
			if(contenedorDocumentos == "#listloan") {
				if($("#listloan div").length == 3){
					$("#listloan").closest("form").find(".selectsDocumentos").addClass("ocultaS");
				
				}
				
				}else{
					$(contenedorDocumentos).closest("form").find(".selectsDocumentos").addClass("ocultaS");
					if($("#listloan div").length >= 1){
						$("#frm_loan .avisoDocs").hide();
					}
				}
			
			}
		listoPaso ();
		fieldCount();
  	},300);
	
}

function archivosCargados (archivo) {
	    var archivoInfo = archivo.find(".eliminar").attr("onclick"); 
	  		archivoInfo = archivoInfo.substring(archivoInfo.indexOf(",") + 1);
	  		archivoInfo = archivoInfo.slice(0,-1)
			archivoInfo = archivoInfo.replace(/,/g , '');
	  		archivoInfo = archivoInfo.replace(/ /g,'');
	  		archivoInfo = archivoInfo.split(/[' ']+/);
		   
	  		return archivoInfo;
}


function btn_comprobante(btnFake, fileBtn) {
	 actividadPrevia = true;
	 cambiandoCategoria = false;
	 var btnReal = fileBtn+ " label";
	 var tipoDocu = $(btnFake).attr("tipodoc");
	 $("#inputDocuMultiples").val(tipoDocu);
	 $("#inputDocuMultiples").blur();
	 $(btnReal).trigger("click");
	 console.log("btn_comprobante");
}




function comprobantesMultiples (select, btnMultiples, contenedorDocumentos, btnFileUploadReal){
	var btnsFake =  btnMultiples;

	var opcionSeleccionada = $(select+" option:selected").val();
	seleccion_actual = opcionSeleccionada;

	
	var selectTexto =" "+  $(select + " option:selected").text() + " ";
	
	$(".tituloTipo strong").html(selectTexto);
   
	
	var numeroDocs = $(contenedorDocumentos+ " div");
	if(seleccion_actual != tipoDocumento){
		 cambiandoCategoria = true;
		 borradoMultiple = false;
	}
	
	if(numeroDocs.length == 0 ){
		cambiandoCategoria = false;
	}
	
	if($(select).attr("id") ==  "type_loan" &&  cambiandoCategoria == false ){
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, reciboNomina, 10, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, estadosCuenta, 11, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, porHonorarios, 128, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, declaracionImpuestos, 12, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, facturas, 9, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, contratoArrendamiento, 13, btnFileUploadReal);
			 dataTipoDoc (select, numeroDocs, opcionSeleccionada, btnsFake, declaracionImpuestos2, 14, btnFileUploadReal);
	}
	console.log("seleccion_actual != tipoDocumento");
	console.log(seleccion_actual != tipoDocumento);
	

	
	console.log("numero de documentos mayor a 1");
	console.log(numeroDocs.length >= 1)
	
	console.log("cambiandoCategoria");
	console.log(cambiandoCategoria)
	
	console.log("borradoMultiple");
	console.log(borradoMultiple);
	
	console.log("actividadPrevia");
	console.log(actividadPrevia);
	
	if(numeroDocs.length >= 1  && cambiandoCategoria == true && borradoMultiple == false && actividadPrevia == true  ){
		console.log("entro aqui!!")
		cambiarTipoDocumento(contenedorDocumentos, select);
	}


}

function dataTipoDoc (select, numeroDocs,  opcionSeleccionada, btnsFake, arreglo, valorActual, btnFileUploadReal) {
	
	
	if( opcionSeleccionada ==  valorActual){
			$(".btn_comprobante").remove();
		     console.log("paso condicion");
			 for (var i = 0; i < arreglo.length; i++){
				 
				 var btn = "<div class='btn_comprobante' tipodoc='"+arreglo[i]+"' onclick='btn_comprobante(this,  \""+btnFileUploadReal+"\" )' ><p>.</p><label><strong class='textBtn' >+ Subir</strong></label></div>";

				 $(btnsFake).append(btn);
				
				 
				 console.log("creacion de elementos");
				 if( i+1 == arreglo.length ){
					 $(numeroDocs).each(function(n) {
						 var archivoRevisar = $(this);
					   	 var archivoInfo =  archivosCargados (archivoRevisar);
						 var filetype =   archivoInfo[3];
							
							 if($.inArray(filetype, arreglo) >= 0) {
								    $(".btn_comprobante[tipodoc='"+filetype+"']").remove();
							 }
							 
					});
					 $(".btn_comprobante p").each(function(n) {
						 $(this).html(n+1+".");
					 });
					 
					
				 }
			 }
			
			 if($(".btn_comprobante").length == 0){
				 $(".tituloTipo").hide();
			 }else{
				 $(".tituloTipo").show();
			 }
			 
			 if($(".btn_comprobante").length > 1){
				 $(".tituloTipo sup").html("tus");
				 $(".tituloTipo u").html("más recientes.");
				 $(".tituloTipo span").show();
				 $(".tituloTipo span").html($(".btn_comprobante").length);
				
			 }else{
				 $(".tituloTipo sup").html("tu");
				 $(".tituloTipo u").html("más reciente.");
				 $(".tituloTipo span").hide();
			 }
			 if( $(".btn_comprobante").length == 1){
				 	$(".btn_comprobante p").hide()
			 }else{
				 $(".btn_comprobante p").show()
			 }
		}

}

function cambiarTipoDocumento(contenedorDocumentos, select) {
	var numeroDocs = $(contenedorDocumentos+ " div");

	alertify.confirm("Al cambiar de tipo de documento se borrarán los documentos cargados, ¿estás de acuerdo?" , function (e) {
		
		if (e) {
			console.log("se ha borrado todo");
			// $("#datos_eliminar").val(compania+"::"+file+"::"+filetype+"::"+prospectus+"::"+proyect+"::"+location);

			displayMessageProcessing('msgprocessing',false);
			borradoMultiple = true;
		  
		  $(numeroDocs).each(function(n) {
			
			    var archivoBorrar = $(this);
			  
			   	 var archivoInfo =  archivosCargados (archivoBorrar);
				 
			   	 var compania =   archivoInfo[1];
				 var file =       archivoInfo[2];
				 var filetype =   archivoInfo[3];
				 var prospectus = archivoInfo[4];
				 var proyect =    archivoInfo[5];
				 var location =   archivoInfo[6];
				 
				 $("#datos_eliminar").val("");
				 $("#datos_eliminar").val(compania+"::"+file+"::"+filetype+"::"+prospectus+"::"+proyect+"::"+location);
				 $("#datos_eliminar").blur();
				
				if(n+ 1 == numeroDocs.length){
					setTimeout(function(){
						closeFancy();
						
				  	},3200);
				
				}
				
		  });
			return true;
		} else { 
			cambiandoCategoria = false;
			valorSelect(select);
			return false;
		}
	}); 
}

function valorSelect( select) {
	
	 var archivoRevisar = $("#listloan div:eq(0)");
	 if(archivoRevisar.is(":visible") ){
		 console.log("existe el elemento")
		 var archivoInfo =  archivosCargados (archivoRevisar);
		 var filetype =   archivoInfo[3];
		 if($.inArray(filetype, estadosCuenta) >= 0) {
			 $(select).val("11");
			 tipoDocumento = "11";
		 }
		 
		 if($.inArray(filetype, facturas) >= 0) {
			 $(select).val("9");
			 tipoDocumento = "9";
		 }
		 if($.inArray(filetype, reciboNomina) >= 0) {
			 $(select).val("10");
			 tipoDocumento = "10";
		 }
		 if($.inArray(filetype, porHonorarios) >= 0) {
			 $(select).val("128");
			 tipoDocumento = "128";
		 }
		 if($.inArray(filetype, declaracionImpuestos) >= 0) {
			 $(select).val("12");
			 tipoDocumento = "12";	
		 }
		 if($.inArray(filetype, contratoArrendamiento) >= 0) {
			 $(select).val("13");
			 tipoDocumento = "13";
		 }
		 if($.inArray(filetype, declaracionImpuestos2) >= 0) {
			 $(select).val("14");
			 tipoDocumento = "14";
			
		 }
		 
		
	 }
	 
	 $(select).change();	
     console.log("change");
	 actividadPrevia = true;
	 fieldCount();
		
}


function eliminarOpciones  (valueOptions, docUno, docDos, docTres, option1, option2, option3, text) {

	var doc1   = $("#listloan div small:contains('"+docUno+"')");
	var doc2   = $("#listloan div small:contains('"+docDos+"')");
	var doc3  =  $("#listloan div small:contains('"+docTres+"')");

	$("#type_loan option").each(function() {
		  if($.inArray( $(this).val(), valueOptions) >= 0) {
			  $(this).remove();
		  }
	});
	  if( doc1.length ){
		  if(!doc2.length ){
			  addOption ("#type_loan option[value='"+option2+"']", option2, text);
		  }else{
			  if(!doc3.length ){
				  addOption ("#type_loan option[value='"+option3+"']", option3, text);
			  }
		  }
	  }else{
		  addOption ("#type_loan option[value='"+option1+"']", option1, text);
	  }

}
function addOption (optionValue, valueNumber, text){
	  if(!$(optionValue).length) {
		    var x = document.getElementById("type_loan");
		    var option = document.createElement("option");
		    option.text = text;
		    option.value = ""+valueNumber+""
		    x.add(option);
		  }
}

function init_listener_file_upload(){	
	$(".custumStlFileUploadPreview").on('change', 'drop', function() 
	{
		
		if($.mobile == null)
		{		
				var fileThis=this;
				var objectUpload=$(this).parents(".custumStlFileUploadPreview");
				var sectionFiles=objectUpload.find(".files");		
				sectionFiles.find(".template-upload").remove();		
				sectionFiles.hide();
				
				var nameFile   = $(this).val();
				var fileFormat = nameFile.substring(nameFile.lastIndexOf(".")+1).toLowerCase();
				
				if((fileFormat=="pdf" || fileFormat=="png" || fileFormat=="jpg" || fileFormat=="jpeg" || fileFormat=="gif") && window.FileReader)
				{
					
						
					upload_automatic (); // agrgegado gabriel
				
					if(fileThis.files[0].size<=5242880)
					{
						objectUpload.delay(100).show('fast', function() 
						{
							
							var preview= sectionFiles.find(".preview");
						
							preview.parent().addClass("validatorClass");
						
						if (fileThis.files && fileThis.files[0]) 
						{											
						        var reader = new FileReader();
						        
						        reader.onload = function (e) 
						        {
						        	
						        	 
						        	if(fileFormat!="pdf")
						        	{
						        		var imgObject = $("<img class='img_complet_view' id='show_"+fileThis.name+"'></img>");	
						        		
						        		var widthWindows=Number($(window).width())-30;
						        		var heightWindows=Number($(window).height())-30;				        		
						        		var divWidth=550;
						        		var divHeight=510;
						        		var flag=false;		
						        		
							        	$(imgObject).load(function () 
							        	{							        		
							        		if(this.width>widthWindows && this.height>heightWindows)
							        		{
							        			divWidth=widthWindows-100;
							        			divHeight=heightWindows-50;
							        			flag=true;
							        		}else if(this.width<widthWindows){
							        			divWidth=this.width;
							        			if(this.height<heightWindows)
							        				divHeight=this.height;
							        			else{
							        				divHeight=heightWindows-50;	
							        				flag=true;
							        			}		        									        			
							        		}					        		
							        		preview.html("<a class='showScreen' title='Ver imagen completa' href='#img_"+fileThis.name+"'>" +
								        			"<img  width='150' height='150'  src='"+e.target.result+"'></img></a>"+
								        			"<div style='display:none;' ><div class='parent-content' style='border:10px solid #444;width:"+divWidth+"px;height:"+divHeight+"px;' id='img_"+fileThis.name+"'></div></div>");					        		
							        		$("div.parent-content").append(imgObject);		
							        		sectionFiles.show();
							        		
							        			
								        
							        	     
							        	       
							        	
							        		if(flag)
							        		{
								        		$(this).imgscale({ 
								    			    parent : '.parent-content',
								    			    scale: 'fit'
								    			  });		
							        		}
							        		
							        		$(".showScreen").fancybox({		
							        			padding : 	0,
							        			margin 	:	0,
							        			transitionIn: 'none',
							        			transitionOut : 'none',	
							        			scrolling : 'auto',
							        			centerOnScroll : true,
							        			titleShow:false,
							        			overlayColor: '#444'
		
							        		});
							        		$("div.parent-content").width("auto").height("auto");
							        		
							        	}).attr("src",e.target.result);
							        	
						        	}else{
						        		
						        	 if(fileThis.files[0].size<=1048576)
						        	 {
						        		preview.html("<a class='showScreen' title='Ver archivo completo' href='#frame_"+fileThis.name+"'>ver archivo</a>" +
							        			"<embed width='150' height='150' src='"+e.target.result+"'></embed>"	+
							        			"<div style='display:none;' ><div id='frame_"+fileThis.name+"' style='border:10px solid #444;' ><embed width='600' height='500'  src='"+e.target.result+"'></embed></div></div>"
							        			);
						        		}else{
						        			preview.html("<img width='150' height='150' src='../resources/img/icon-pdf.png' ></img>"
								        			//"<div style='display:none;' ><div id='frame_"+fileThis.name+"' style='border:10px solid #444;' ><iframe width='600' height='500'  src='"+e.target.result+"'></iframe></div></div>"
								        			);
						        		}
						        		sectionFiles.show();
						        		$(".showScreen").fancybox({		
						        			padding : 	0,
						        			margin 	:	0,
						        			transitionIn: 'none',
						        			transitionOut : 'none',	
						        			scrolling : 'auto',
						        			centerOnScroll : true,
						        			titleShow:false,
						        			overlayColor: '#444'
						        		});
						        	}
						        					        	
						        };
						        reader.readAsDataURL(fileThis.files[0]);
						    }else{
						    	sectionFiles.show();
						    }
						});
						
					} else {
						
						sectionFiles.show();
					}
						
						
				}else{
					objectUpload.delay(100).show('fast', function() {
						sectionFiles.show();
						var tdName=sectionFiles.find(".name");
						var nameFile=tdName.text();
						
						if(nameFile.length>=10)
						{
							tdName.attr("title",nameFile);
							if(nameFile.length-13>5){
								tdName.text(nameFile.substring(0,10)+"...."+nameFile.substring(nameFile.lastIndexOf(".")-5)).removeClass("name");
							}else{
								tdName.removeClass("name");
							}					
						}else{
							tdName.removeClass("name");
						}				
					});
				}		
				return false;
				
		}
		 
	});
	
	
}

function oncompleterequest(component){
	if(component!=null){
	var element=$("#"+component);
	$('.template-upload.ui-state-error').remove();
	element.css("display","inline");							 
	var elementChild=element.parents(".containerTitleUpload");
	if(elementChild.children().eq(0).hasClass("corner")){
	
		elementChild.find(".corner").removeClass("corner").addClass("cornerDisabled");
		elementChild.find(".numberAndTitle").removeClass('numberAndTitle').addClass("numberAndTitleDisabled");
		elementChild.find(".number").removeClass("number").addClass("numberDisabled");
		elementChild.find(".title").removeClass("title").addClass("titleDisabled");
		console.log("esto se está haciendo");
		
		
	}	
	
	fieldCount();
	}
	

	console.log("element"+element);
}

function validateSelectDocument(component) {
	var element=$("#"+component);
	if(element.val()==""){
		   element.validationEngine('showPrompt', 'Seleccione un documento','error','centerRight', true);		   
		   return false;	   
	   }
	   else{
		   element.parent().children('.formError').remove(); 
		   return true;
	   }
	
}

function validateFileUploadCombo(component) {

	

	var element=$("#"+component);
	var parent=element.parent();
	
	var text="Presiona para subir tu "+element.find('option:selected').text();
	if(element.val()!=""){	
		
		   //parent.parent().children('.formError').remove();
		   //parent.next().show();
		   //parent.next().stop();
		
		$("#dv"+component).delay(400).show();
	
//		   parent.next().children().eq(0).validationEngine('showPrompt',text,'error','centerRight', true).prev().delay(5000).hide(800, function () {
//		        $(this).remove();
//		   });
		
		  // agregado gabriel
		   $('.combo_tipo_doc').removeClass("seleccionar_tipo"); 
		   element.closest('.selectsDocumentos').find('.avisoDocs').hide();
		   return true;	   
			
	   }
	   else{
		   parent.next().hide();
		// agregado gabriel
		   element.closest('.selectsDocumentos').find('.avisoDocs').show();
		    if ($("#"+component).closest("form").find(".contenedor_docs div").is(":visible")) {
			}else {
				$("#"+component).closest("form").find(".contenedor_docs article").hide();
			}
		   return false;
		   
		   
	   }
}

