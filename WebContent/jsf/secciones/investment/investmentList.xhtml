<ui:composition xmlns="http://www.w3.org/1999/xhtml"

		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui">	
		
		
<script type="text/javascript" src="../resources/js/loanListScript.js"></script>




<h:panelGroup id="pnlMsgSug" rendered = "#{investmentList.maxInvBiteRecomded != null and investmentList.maxInvBiteRecomded != ''}">
	
	
		
	
	</h:panelGroup>
<ui:include src="tienda/barra_flotante.xhtml" />

<h:panelGroup rendered="false">

	<div class="dvContent">

		<div class="dvLabel  expectedPerforme">

			<h:outputLabel styleClass="labelsStl" value="#{msg.ll_expected_perfomance}"/>
			<h:outputText styleClass="labelsStl" value="#{investmentList.getExpectedPerformanceByInvestorId(sessionBean.prospectus_id)}">
				<f:convertNumber currencySymbol="$" type="currency" groupingUsed="true" locale="es_MX"/>
			</h:outputText>

		</div>

	</div>

</h:panelGroup>	



		
<div id="dvContentLoanLst" class="container_loanlist">
	<div class="velo"></div>
	
	<ui:include src="tienda/sidebar.xhtml" />
<h:form id="table_proyect_list" prependId="false">
<div id="providing_table" >

<h:inputHidden id="flagMin_E5_E4" value="#{investmentList.flagMin_E5_E4}" />	
	
		<FIELDSET>
		
		<!-- <h:panelGroup id="pnlMsgSug" rendered="#{sessionBean.area == 'I'}" > -->
		
					<ui:include src="tienda/invertir_datos.xhtml" />
		  
	
			 <!-- div style="float: none;clear: both; margin-top: #{sessionBean.area!='I'?'10px;':'40px;'}"  -->
		
			<!-- <p:dataTable id="creditos" emptyMessage="#{msg.ll_empty_message}" style="width:98% !important;" 
                     scrollRows="20" scrollable="true" liveScroll="true" scrollHeight="450" value="#{investmentList.proyectList}" var="proList" resizable="true" styleClass="dataTableSelProject" cellspacing="7" cellpadding="7">
			  --> 	
			  <ui:include src="tienda/tabla_tienda.xhtml" />
			  
			  
			<div class="botonesBottomTabla">
				<div  class="callActionMedium  btnNaranja invertirAbajoTabla" onclick="bridgeFunctionInvPaq();">
						 
							 Invertir Paquete
						 
						</div>
				<p:commandLink id="recargar_proyectos" styleClass="callActionMedium btnVerde" onclick="buildQueryFilter();"  value="Recargar proyectos" oncomplete="filtros();"/>
			
			</div>
		
		       
				 		
						<!-- 
				 		
		 				-->
		
		</FIELDSET>
		
		
		<div style="display:none;" >
		
			<p:commandLink id="buttonTable" update="creditos, :formLL:pnlNumCredito"  ></p:commandLink>
		
		</div>
	
	</div>
	</h:form>
	<div id="footer" class="footerLoanList" >
			<!-- <ui:include src="../../templates/footerContenido.xhtml" /> -->
	</div>
	<div style="display: none;">
		<h:form prependId = "false">
			<p:inputText id="inputTimer" value = "#{investmentList.timer}" >
				<p:ajax event="blur" />
			</p:inputText>
		
		</h:form>
	
	</div>
	
	
		
		
		
		
			<div id="dvPreMyInvestments">
			
				<!-- div id="dvWaitConfInv" >
						<img src="../resources/img/ajax-loader.gif" />
				</div-->
			
				<div id="dvContTableConfInv" >
				
				<h:panelGroup id = "pnlConfirmInvest" >
				
				
					<table >
					
						<tr>
							
							<td colspan="3"  ><h3 class="encabezado_3">Confirma Inversión</h3></td>
							
						</tr>
					
						<tr>
							<td>Monto a invertir</td>
							<td class="montoInvertirCelda" >
								<h:outputText value="#{investmentList.monto_a_invertir_total}">
									<f:convertNumber maxFractionDigits="2" minFractionDigits="2" currencySymbol="$" type="currency" groupingUsed="true" locale="es_MX"/>									
								</h:outputText>
							</td>
							<td></td>
						</tr>
						<tr>
							<td>Número de proyectos </td>
							<td class="numero_proyectos_totales">${investmentList.proyectListForInvesInd.size()}</td>
							<td></td>
						</tr>
						<tr>
							<td>Tasa Ponderada </td>
							<td   class="montoInvertirCelda"> 
								<h:outputText value="${investmentList.tasaPonderada}">
									<f:convertNumber pattern="#0.00"  locale="es_MX" />	
								</h:outputText>%
							
							</td>
							<td></td>
						</tr>
						<tr>
							<td colspan="3" class="celdPadding" >

									<table style="margin-left: auto; margin-right:  auto;" >
										
										<tr>
											<th class="riesgoProyectosPorcentaje">
												Riesgo
											</th>
											<th class="riesgoProyectosPorcentaje">#Proyectos</th>
											<th class="riesgoProyectosPorcentaje">%</th>
											<th class="riesgoProyectosPorcentaje">Tasa Ponderada</th>
										</tr>
									
										<tr>
											<td  class="dvRiskACell" >
												<div class="dvRiskA">
													<p class="statusLeft">A</p>
												</div>
											</td>
											<td>${investmentList.aToInv}</td>
											<td class="proyectListForInvesIndCell">
												<h:outputText value="${(investmentList.aToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />										
												</h:outputText>%
											</td>
											<td>
											
												<h:outputText value="#{investmentList.tasaPon_A}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											
											</td>
										</tr>
										<tr>
											<td class="dvRiskBCell">
												<div class="dvRiskB">
													<p class="statusLeft">B</p>
												</div>
											</td>
											<td>${investmentList.bToInv}</td>
											<td class="cellProyectListForInvesInd">
												<h:outputText value="${(investmentList.bToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
											</td>
											<td>
												<h:outputText value="#{investmentList.tasaPon_B}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											</td>
										</tr>
										<tr>
											<td class="cellDvRiskC" >
												<div class="dvRiskC">
													<p class="statusLeft">C</p>
												</div>
											</td>
											<td>${investmentList.cToInv}</td>
											<td class="cellProyectListForInvesInd">
												<h:outputText value="${(investmentList.cToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
											</td>
												<td>
													<h:outputText value="#{investmentList.tasaPon_C}">
														<f:convertNumber pattern="#0.00"  locale="es_MX" />	
													</h:outputText>%
												</td>
										</tr>
										<tr>
											<td class="cellDvRiskD">
												<div class="dvRiskD">
													<p class="statusLeft">D</p>
												</div>
											</td>
											<td>${investmentList.dToInv}</td>
											<td class="cellProyectListForInvesInd">
												<h:outputText value="${(investmentList.dToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
											</td>
											<td>
												<h:outputText value="#{investmentList.tasaPon_D}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											</td>
										</tr>
										<tr>
											<td class="cellDvRiskE">
												<div class="dvRiskE" >
													<p class="statusLeft">E</p>
												</div>
											</td>
											<td >${investmentList.eToInv}</td>
											<td class="cellProyectListForInvesInd" >
												<h:outputText value="${(investmentList.eToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
												
											</td>
											<td>
												<h:outputText value="#{investmentList.tasaPon_E}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											</td>
										</tr>
										<h:panelGroup rendered="#{investmentList.flagInversionFG}" >
										<tr>
											<td style="padding-left: 10px;">
												<div class="dvRiskF" style="margin-left: auto; margin-right: auto;" >
													<p class="statusLeft">F</p>
												</div>
											</td>
											<td >${investmentList.fToInv}</td>
											<td >
												<h:outputText value="${(investmentList.fToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
												
											</td>
											<td>
												<h:outputText value="#{investmentList.tasaPon_F}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											</td>
										</tr>
										<tr>
											<td style="padding-left: 10px;">
												<div class="dvRiskG" style="margin-left: auto; margin-right: auto;" >
													<p class="statusLeft">G</p>
												</div>
											</td>
											<td>${investmentList.gToInv}</td>
											<td>
												<h:outputText value="${(investmentList.gToInv*100)/investmentList.proyectListForInvesInd.size()}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />									
												</h:outputText>%
												
											</td>
											<td>
												<h:outputText value="#{investmentList.tasaPon_G}">
													<f:convertNumber pattern="#0.00"  locale="es_MX" />	
												</h:outputText>%
											</td>
										</tr>
										</h:panelGroup>
									</table>
							
								
							</td>
						</tr>
					</table>
					
					</h:panelGroup>
					<div class="botones_lightbox">
					
						<div class="callActionMedium  btnGris" onclick="cancelInv();">
							Cancelar
						</div>
							<div class="callActionMedium  btnNaranja"  onclick="aceptaInvertir();">
							Invertir
						</div>
					</div>
				</div>
			
				<script>
					function cancelInv(){
						$(".clsCntInvDesc").css("visibility","visible");
						$("#dvPreMyInvestments").removeClass("show");
						$(".velo").fadeOut();
					}
				
			
					
				</script>

					
			</div>
	
<!-- 
	<div style="display: none;" >
	<div id="popupfunding" style="border: solid 10px #333333;padding: 10px;">
		<div class="contPR" style="position: relative;margin-right: 0px;min-height: 0 !important;background-color: #FFFFFF;">
		<div class="contFrm" style="padding-right: 0px;width: auto; margin: 0px auto;">	
		<div class="clTitle" style="margin: 5px; width: auto; text-align: center;">
			<h:outputText value="Resultado del fondeo"  />
		</div>
		<fieldset>
			<div class="dvContent">					
				<div id="content-result-funding" >
							
				</div>					
			</div>						
		</fieldset>
			<div class="dvContent">
				<div class="dvElementLength" style="float: right;">						
					<div class="btndetails" onclick="$.fancybox.close();" style="margin:0;" >
						Aceptar
					</div>									 
				</div>	
			</div>
		</div>
		</div>
	</div>
</div>	
 -->


	
<div style="display: none;" >
	
	<div id="popupData">
	<div class="contPR popupDataDiv">
	<div class="contFrm  popupDataDivcont">
	
	<h:form id="frm_select_account" prependId="false">
	
		<div class="clTitle tittleHover" >
			<h:outputText value="#{msg.ll_title_hover}"  />
		</div>
		
		<fieldset>		
			<div class="dvContent">		
			<h:panelGroup id="section_account_popup">
					<div class="dvLabel section_account_popup">
						<h:outputLabel styleClass="labelsStl" value="#{msg.ll_credit_available}"/>
					</div>
					<p/>
					<div class="dvLabel section_account_popup">
						<h:outputText  value="#{investmentList.saldoActual}" styleClass="labelsStl">
						     <f:convertNumber currencySymbol="$" type="currency" groupingUsed="true" locale="es_MX"/>
						</h:outputText>
					</div>
					<p/>
					<div class="dvLabel section_account_popup">
						<h:outputLabel styleClass="labelsStl" value="#{msg.ll_account} #{investmentList.tagAccount}"/>
					</div>
					<p/>					
					<div  class="dvElementLength divdvElementLength">
						<div class="styled-select-Address divStyled-select-Address">
							<h:selectOneMenu  id="cuentasUsrPop-up" styleClass="elementStlSelAddress" value="#{investmentList.cuentaActual}">  
								<f:selectItem itemValue="" itemLabel="Todas las cuentas" />
								<f:selectItems value="#{investmentList.listInvAccounts}" var="account" itemLabel="#{account.accountName}" itemValue="#{account.account}"/>
								<p:ajax event="change" listener="#{investmentList.changeAccount}" update=":formLL:section_account section_account_popup" />    
							</h:selectOneMenu>
						</div>
					</div>						
				</h:panelGroup>
			</div>
			<div class="dvContent"  style="float: right;">
			
					<div class="btndetails" id="btn_cancel"  >
						#{msg.Btn_return}
					</div>								
					<div class="btndetails" id="btn_aceptar" >
						Invertir
					</div>									 
			
			</div>
		</fieldset>
	
		</h:form>
	</div>
	</div>
	</div>
</div>

</div>

<script>
	
</script>
<h:panelGroup id="pnlResInv">
<div id = "dvResInv">
<div class="dvResInv_div">
	
		<p:graphicImage styleClass="close_dvResInv" url="../resources/img/close.png" onclick="hideMessageRes();" ></p:graphicImage>

	
	<table class="tablaTotalProyectos" >
		<tr>
			<td class="tablaTotalProyectos_inv" colspan="2"  > Inversión </td>
		</tr>
		<tr>
			<td class="tablaTotalProyectos_total">Total de proyectos:</td>
			<td class="creditFoundedCell" >
				<h:outputText  value="#{investmentList.creditFounded}" styleClass="labelsStl creditFounded">
				</h:outputText>
			</td>
		</tr>
		<tr>
			<td class="totalInvCell" >Total invertido:</td>
			<td class="totalInvCell2">
				<h:outputText  value="#{investmentList.ammountFounded}" styleClass="labelsStl labelammountFounded" >
				     <f:convertNumber currencySymbol="$" type="currency" groupingUsed="true" locale="es_MX"/>
				</h:outputText>
			</td>
		</tr>
		<tr>
			<td colspan="2" style="display: #{(investmentList.creditNotFounded gt 0)?'block':'none'} ">
				<table style="background-color:  #FFB266; ">
					<tr>
						<td colspan="2" style="text-align: center;" > No se pudo invertir en #{investmentList.creditNotFounded} #{(investmentList.creditNotFounded gt 1)?'proyectos':'proyecto'} proyectos <br /> ya que han alcanzado su límte máximo de inversión </td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td class="btndetailsCell" colspan="2">
			
				<div class="btndetails" onclick="hideMessageRes();" >
					Aceptar
				</div>
			
			</td>
		</tr>
	</table>
	
</div>	
<input type="hidden" id="montoMaxInv" value="#{investmentList.montoMaxStr()}"  />
<input type="hidden" id="montoInv" value="#{investmentList.montoinvertirStr()}"  />
	
</div>
</h:panelGroup>

<!-- Script checkbox -->
				<h:panelGroup id="pnlScriptStatus">
						<h:outputText escape="false" value="#{investmentList.scriptStatus}"  ></h:outputText>
				</h:panelGroup>
				<!--  Fin Script check-box-->	
</ui:composition>