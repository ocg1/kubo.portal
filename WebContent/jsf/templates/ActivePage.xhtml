<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
>

<script>
	function verifiedReturn(xhr,status,args){
		
		
		
		
		
		if(args.isVerified)
		{
			$("#msgProcessactive").fadeOut("fast",function(){
				
				$("#msgSuccessActive").fadeIn("fast");
				
			});
		
		}else{
			
			$("#msgProcessactive").fadeOut("fast",function(){
				
				$("#msgErrorActive").fadeIn("fast");
				
			});
		}
		
	}
</script>

	<h:panelGroup id="messagePage" rendered="#{activationController.displayMessagePage=='block'}">
		<div style="width: 99%; height: 100%;border: solid 0px #F6F6F6;margin-top: 0px;">
			
			<div style="padding: 0px; margin-top: 120px !important; height: auto; overflow: hidden; width: 570px; margin-left: auto; margin-right: auto; margin-bottom: 220px;  padding-top: 0px !important; border: solid 0px #000000; position: relative; ">
				
				<div class="corner" style="width: 82px; height: 72px; margin-bottom: 0px;  overflow: hidden; float: left; border: solid 0px #f0f3c3; bottom: -1px; left: 7px; position: absolute;  ">
		    		<div class="cornerFill"></div>
		    	</div>
		    	
				<div class="msgBorder" style="height: auto; margin-left: auto; margin-right: auto; overflow: hidden; width: 400px;">
		
					<div class="msgBack">
						<span class="msgResaltar" >kubo.financiero </span><br /><br />Es necesario que entres desde tu correo para activar esta página.
					</div>
				</div>
			</div>
			
		</div>
	</h:panelGroup>
	
	<h:panelGroup id="falsePage" rendered="#{activationController.displayFalsePage=='block'}">
		<div style="width: 99%; height: 100%;border: solid 0px #F6F6F6;margin-top: 0px;">
			
				<div style="padding: 0px; margin-top: 120px !important; height: auto; overflow: hidden; width: 870px; margin-left: auto; margin-right: auto; margin-bottom: 220px;  padding-top: 0px !important; border: solid 0px #000000; position: relative; ">
				
				<div class="corner" style="width: 82px; height: 72px; margin-bottom: 0px;  overflow: hidden; float: left; border: solid 0px #f0f3c3; bottom: -1px; left: 7px; position: absolute;  ">
		    		<div class="cornerFill"></div>
		    	</div>
		    	
				<div class="msgBorder" style="height: auto; margin-left: auto; margin-right: auto; overflow: hidden; width: 700px;">
		
					<div class="msgBack">
					
					<span class="msgResaltar">kubo.financiero </span><br /><br />Lo sentimos. Este es un link invalido. Registrate con nosotros para activar esta página.
					</div>
					</div></div>
			
		</div>
	</h:panelGroup>

	<h:panelGroup id="activedPage" rendered="#{activationController.displayActivedPage=='block'}">
	<h:form id="frm_redirec_active" prependId="false" >
		<div style="width: 99%; height: 100%;border: solid 0px #F6F6F6;margin-top: 0px;">
			
			<div style="padding: 0px; margin-top: 120px !important; height: auto; overflow: hidden; width: 870px; margin-left: auto; margin-right: auto; margin-bottom: 220px;  padding-top: 0px !important; border: solid 0px #000000; position: relative; ">
				
				<div class="corner" style="width: 82px; height: 72px; margin-bottom: 0px;  overflow: hidden; float: left; border: solid 0px #f0f3c3; bottom: -1px; left: 7px; position: absolute;  ">
		    		<div class="cornerFill"></div>
		    	</div>
		    	
				<div class="msgBorder"  style="height: auto; margin-left: auto; margin-right: auto; overflow: hidden; width: 700px; ">
		
					<div class="msgBack">
					
					<span class="msgResaltar">kubo.financiero </span><br />
					
					<div style="display: none;" >
					
						<h:commandLink  id="btnActionRedirect" action="access" immediate="true" ></h:commandLink>
					
					</div>
					
					<div style="width: 24px; height: 24px; margin-left: auto; margin-right: auto;">
						<img src="../resources/img/ajax-loader.gif" border="0" ></img>
					</div>
					
					<script>
					
						$(document).ready(function(){
							$("#btnActionRedirect").click();
						});
					
						
					</script>
					
					
					</div>
				</div>
			</div>
			
		</div>
		
		</h:form>
	</h:panelGroup>

	<h:panelGroup id="activePage" rendered="#{activationController.displayActivePage=='block'}" >
		<div class="contPR" style="background-color:transparent; " >
				
			<h:form prependId="false">
				
				<div class="lemaPR" style=" width: 40%; margin-left: auto; margin-right: auto; font-size: 1.3em !important; text-align: center;">
						
						Bienvenido a <b>kubo.financiero</b>
					
				</div>
				
				<div style="border: solid 8px #C1D82F; margin-left: auto; margin-right: auto; width: 300px; padding: 10px;min-height: 50px; " >
					
					<div id="msgProcessactive" style="width:99%; margin-left: auto; margin-right: auto; font-size: 1.2em !important; " >
						
						Tu cuenta está siendo verificada
						
						<br />
						<div style="margin-left: auto; margin-right: auto;width: 25px; height: 25px;margin-top: 10px;">
							<img src="../resources/img/ajax-loader.gif"  />
						</div>
						
					</div>
					
					<script>
					
						$(document).ready(function(){
							$("#buttonActivation").click();
						});
					
						
					</script>
					
					<div id="msgSuccessActive" style="width:99%; margin-left: auto; margin-right: auto; font-size: 1.2em !important;display: none; " >
						<div style="float: left;padding-top: 10px;" >
						Gracias por verificar tu correo
						</div>
						<div 
							style="margin-left: auto; 
									margin-right: auto;
									width: 25px; 
									height: 25px;
									margin-top: 10px; 
									background-image: url('../resources/img/sim_check.gif');
    								background-repeat: no-repeat;
    								background-position: center;
    								float: right; ">
						</div>
					</div>
					
					<div id="msgErrorActive" style="width:99%; margin-left: auto; margin-right: auto; font-size: 1.2em !important; display: none; " >
						
							Ocurrió un error al validar tu cuenta de correo.. intentalo más tarde desde el mismo link o comunícate al 62-67-00-24 
					
					</div>
					
				</div>
				
				<h:inputHidden id="myhidden" value="#{headerBean.activeStr}"></h:inputHidden>
				
				<div style="display: none;" >
				
					<div id="dvButtonActivation" style="margin-left: auto; margin-right: auto;">
						<p:commandLink id="buttonActivation" oncomplete="verifiedReturn(xhr,status,args);" action="#{activationController.verificarCorreo}" immediate="true"   style="text-decoration: none;" >
							<div class="buttonPR">
								<h:outputText value="Activar" />
							</div>
						</p:commandLink>
					</div>
				
				</div>
				
			</h:form>
					
		</div>
	</h:panelGroup>
	
	<ui:include src="../templates/msgProcessing.xhtml" />
		
</ui:composition >