<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui">
	<h:head>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
		<!--[if lt IE 9]>
			<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
		<![endif]-->
		
		<meta name="HandheldFriendly" content="True"> </meta>
		<meta name="MobileOptimized" content="320"> </meta>
		<meta name="viewport" content="width=device-width, initial-scale=1"> </meta>
		<!-- MS --> 
		<meta http-equiv="cleartype" content="on"> </meta>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"></meta>
		
		
		
		<!-- <script type="text/javascript" src="../resources/js/jquery-1.7.1.js"></script> -->
		<script type="text/javascript"
		src="../resources/js/contenido.js"></script>
		<script type="text/javascript" src="../kubo/js/scriptUnidadEsp.js"></script>
		
		<script language="javascript" type="text/javascript" src="../resources/js/reloj.js"></script>
		
	<script type="text/javascript"
		src="../resources/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
	
	<script type="text/javascript"
		src="../resources/js/fancybox/jquery.easing-1.3.pack.js"></script>
	<script type="text/javascript"
		src="../resources/js/fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
	
	<script type="text/javascript"
		src="../resources/js/jquery.scrollTo.js"></script>
		
	<script type="text/javascript"
		src="../resources/js/jquery.blockUI.js"></script>
		
	<link rel="stylesheet" type="text/css" href="../resources/js/fancybox/jquery.fancybox-1.3.4.css" media="screen" />
		
	<link rel="stylesheet" type="text/css" href="../resources/css/style.css" />
	<link rel="stylesheet" type="text/css" href="../resources/css/inicio.css" />	
		<link rel="stylesheet" type="text/css" href="../resources/css/ayuda.css" />
		<link rel="stylesheet" type="text/css" href="../resources/css/ayudaStyle.css" />
		<link rel="stylesheet" type="text/css" href="../resources/css/capitulo1.css" />
		<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="../resources/css/proyectos.css" />
		
		<link rel="stylesheet" type="text/css" href="../resources/css/simulator.css" />
		<link rel="stylesheet" type="text/css" href="../resources/css/comparison.css" />
		<link rel="stylesheet" type="text/css" href="../resources/css/registro.css" />	
		
		<link rel="stylesheet" type="text/css" href="../resources/css/header.css" />
		<link rel="stylesheet" type="text/css" href="../resources/css/footer.css" />
		
		
		
		
		<script type="text/javascript">
			$(document).ready(function() {
				
				$("#inlineMail,#inlineSave").fancybox({
					'width' : '1000px',
					'height' : '200px;',
					'autoScale' : 'false',
					'transitionIn' : 'elastic',
					'transitionOut' : 'elastic',
					'type' : 'inline',
					'scrolling' : 'auto',
					'centerOnScroll' : 'true',
					'overlayColor': '#000000',
					'overlayOpacity': '0.15',
					'padding': '5px',
					'margin': '5px'
				});
				
				$("#menuSim5").fancybox({
					'width' : '1000px',
					'height' : '200px;',
					'autoScale' : 'false',
					'transitionIn' : 'elastic',
					'transitionOut' : 'elastic',
					'type' : 'inline',
					'scrolling' : 'auto',
					'centerOnScroll' : 'true',
					'overlayColor': '#000000',
					'overlayOpacity': '0.55',
					'padding': '0px',
					'margin': '0px',
					'href': '#formAmort',
					'onStart': function() {
						generaAmort();
					}
				});
				
				$("#menuSim2").click (function() {
					//LimpiaVariables();
					$("#msjDet").hide("fade",500);
					$("#imgSim1").hide("fade",500);
					
					$("#menuSim5").hide( "blind", 
		                     {direction: "vertical"}, 200 ,function(){
									$("#menuSim4").hide( "blind", 
					                     {direction: "vertical"}, 200 ,function(){
											$("#menuSim3").hide( "blind", 
							                     {direction: "vertical"}, 200 ,function(){
							                    	 $("#menuSim2").hide( "blind", 
							    		                     {direction: "vertical"}, 200);
							                     });
											 $(".divsimulatorkubo").hide( "fade", 500,function(){
												 $("#contSimPnl").show( "fade", 500 );
											 } );
				                     } );
		                     });
				});
				
				/*$('#menuSim3').click(function() { 
			        $.blockUI({ 
			        	message: $('#formRegistro'),
			        	css: { 
			                top:  '20%', 
			                left: '20%', 
			                width: '80%',
			                height:'80%',
			                padding: '0px'
			            } 
			        }); 
			    });*/ 
				
				$("#callToActionSim").click (function() {
					calculaSim();
					
					$("#menuSim2").show( "blind", 
	                     {direction: "vertical"}, 200 ,function(){
							$("#menuSim3").show( "blind", 
			                     {direction: "vertical"}, 200 ,function(){
			                    	 $("#menuSim4").show( "blind", 
			    		                     {direction: "vertical"}, 200,function(){
			    		                    	 $("#menuSim5").show( "blind", 
						    		                     {direction: "vertical"}, 200);
			    		                     });
			                     });
                    		 } );
					
					$("#contSimPnl").hide( "fade", 500,function(){
						 $(".divsimulatorkubo").show( "fade", 500 );
						 $("#msjDet").show("fade",500,function(){
							 $("#isVisible").val('0');
							 $("#msjDet").click(function(){
									if($("#isVisible").val()=='0'){
							         	$("#detalle").show( "blind",  {direction: "vertical"}, 1000 );
							         	$("#msjDet").html("Ocultar detalle");
							         	$("#isVisible").val('1');
							         	return;
									}else{
										$("#detalle").hide( "blind",  {direction: "vertical"}, 1000 );
							         	$("#msjDet").html("Ver detalle");
							         	$("#isVisible").val('0');
							         	return;
									}
							      });
							 
						 });
							$("#imgSim1").show("fade",500);
					 } );
				});
				
				$("#prereg").click (function() {
					parent.$.fancybox.close();
					  
				});
				$("div.blindAction").click(function(){
			         $("blindEffect").hide( "blind", 
			                     {direction: "horizontal"}, 1000 );
			      });
				
				$("#msjDet").click(function(){
					if($("#isVisible").val()=='0'){
			         	$("#detalle").show( "blind",  {direction: "vertical"}, 1000 );
			         	$("#msjDet").html("Ocultar detalle");
			         	$("#isVisible").val('1');
			         	return;
					}else{
						$("#detalle").hide( "blind",  {direction: "vertical"}, 1000 );
			         	$("#msjDet").html("Ver detalle");
			         	$("#isVisible").val('0');
			         	return;
					}
			      });
				
				$("#save").click (function() {
					guardaSim();
					  
				});
				$("#send").click (function() {
					enviaMail();
					  
				});
				
			});
			
			function LimpiaVariables(){
				
				$("#formSim2\\:actionClear").click();
			
			}
			
			function calculaSim(){
				$("#formSim2\\:actionCalculate").click();
			}
			
			function enviaMail(){
				
				$("#formSim2\\:actionMail").click();
			
			}
			
			function generaAmort(){
				
				$("#formSim2\\:actionAmort").click();
			
			}
			
			function guardaSim(){
				
				$("#formSim2\\:actionSave").click();
				
				$("#contGeneral").hide( "blind",  {direction: "vertical"}, 1000,function(){
					$("#satisfactorio").show( "blind",  {direction: "vertical"}, 1000 );
				} );
			}
			
		</script>
		
		<title>kubo.financiero | Simulador de crédito</title>				   
        <meta name="Description" content="
		Simulador de crédito. Destino. Monto. Plazo. Numero de cuentas. Total a pagar."/>
		<script>
		/******************GOOGLE*ANALYTICS**************************************/  
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			  ga('create', 'UA-40649010-1', 'auto');
			  ga('require', 'linkid');
			  ga('require', 'displayfeatures');
			  ga('send', 'pageview');

		  /*****************FIN*GOOGLE*ANALYTICS**********************************/
		</script>
	</h:head>
	<h:body >
		
		<div id="header" style="width: 100%; magin-right: 0px; margin-bottom: 0px;">
			<ui:include src="templates/headContenido.xhtml" />
		</div>
			
		<h:form id="form_Prin">	
		
		<div id="titulo">Simulador</div>
		
		<div id="contGeneral">
			<div id="mnsjSim">Si tu crédito es aprobado, obtendrás mejores tasas. <p:commandLink actionListener="#{curatedController.irPreregistro}" styleClass="actionSim"><span>Registrate ahora</span></p:commandLink> </div>
			<div id="contSim" >
				<div id="contMenuSim">
					<div id="menuSim1">
						<p:graphicImage url="../resources/img/Price-Comparison-32.png" width="25px" height="25px" />
						&nbsp;
						<p:commandLink action="comparation" id="actionCompara" styleClass="actionSim">
							¿Tienes otros préstamos? Compáralos.
						</p:commandLink> 
					</div>
					<div id="menuSim2">
						<p:graphicImage url="../resources/img/Refresh-32.png" width="25px" height="25px" />
						&nbsp;<b>Realiza otra simulación.</b>
					</div>
					<div id="menuSim3">
						<p:graphicImage url="../resources/img/Send-Mail-32.png" width="25px" height="25px" />
						&nbsp;<h:outputText value="#{simulator.mailAction}" escape="false"></h:outputText>
					</div>
					<div id="menuSim4">
						<p:graphicImage url="../resources/img/Save-32.png" width="25px" height="25px" />
							&nbsp;
						<h:outputText value="#{simulator.guardarAction}"  escape="false"></h:outputText>
					</div>
					<div id="menuSim5">
						 <p:graphicImage url="../resources/img/page-32.png" width="25px" height="25px" />
							<a id='amort' href='#'>Genera la Tabla de Amortización.</a>
					</div>
					<div id="menuSim6">
						<p:commandLink action="simulator2" id="sim2" styleClass="actionSim">
							Simulador2.
						</p:commandLink> 
					</div>
				</div> 
				<h:panelGroup id="propuestaPnl">
					<div id="msjDet" class="puntero" style="position: absolute; z-index: 3; top: 35px; right: 400px; font-weight: normal;">ver detalle</div>
					<div class="divsimulatorkubo">
						<div id="simHeader" style="position: absolute; z-index: 3; top: 50px; right: 330px;"> <p:graphicImage url="../resources/img/simulador-7.png" width="80%" height="80%"></p:graphicImage> </div>
						<div id="simTitulo" style="position: absolute; z-index: 4; top: 58px; right: 460px; color: #FFFFFF; font-weight: bold; font-size: 1.4em;">Propuesta kubo</div>
			              <div id="contTableSim1" style="position: absolute; padding-top: 20px; top: 60px; right: 401px; width: 244px; background-color: #f5f5f7; z-index: 1;">
			                <table style="width:100%; margin-left: auto; margin-right: auto;" class="tablaPropuesta">  
			                	<tr><td>
			                		<table style=" margin-left: auto; margin-right: auto;">
			                			<tr><td width="220px;">
					                  		<h:outputLabel value="Destino de tu crédito:" class="labelPropuesta" />
					                  	</td><td width="128px">
					                  		<h:outputLabel value="#{simulator.purposeName}" class="valorPropuesta"/>
					                  	</td></tr>
					                  	<tr><td>
					                  		<h:outputLabel value="Monto de crédito:" class="labelPropuesta"/>
					                  	</td><td>
					                  		<h:outputLabel value="$ #{simulator.ammountStr}" class="valorPropuesta"/>
					                  	</td></tr>
					                  	<tr><td>
					                  		<h:outputLabel value="Plazo:"  class="labelPropuesta"/>
					                  	</td><td>
					                  		<h:outputLabel value="#{simulator.term_id} meses" class="valorPropuesta" />
					                  	</td></tr>
					                  	<tr><td>
					                  		<h:outputLabel value="Frecuencia:" class="labelPropuesta"/>
					                  	</td><td>
					                  		<h:outputLabel value="#{simulator.frequencyName}" class="valorPropuesta"/>
					                  	</td></tr>
					                  	<tr><td>
					                  		<h:outputLabel value="Numero de cuotas:" class="labelPropuesta"/>
					                  	</td><td>
					                  		<h:outputLabel value="#{simulator.numCuota}" class="valorPropuesta"/>
					                  	</td></tr>
					                  	<!-- Comparacion -->
					                  	<tr><td>
					                  		<h:outputLabel value="Monto de cuota:" class="labelPropuestaResalta" ></h:outputLabel>
					                  	</td><td>
					                  		<h:outputLabel value="$ #{simulator.montoCuotaStr}" class="propuestaCuota"/>
					                  	</td></tr>
					                  	<!-- Fin Comparacion -->
					                  	
					                  	<!-- Comparacion2 -->
					                  	<tr><td>
					                  		<h:outputLabel value="Total a pagar:" class="labelPropuestaResalta"/>
					                  	</td><td >
					                  			<div class="resaltaSim">
					                  				<h:outputLabel  value="$ #{simulator.totalPagarStr}" />
					                  			</div>
					                  	</td></tr>
					                  	<!-- fin comparacion2 -->
					                </table>
			                  	</td></tr>
					            <tr><td>
					            	
				                  <div id="detalle">
				                  	<table style="width:100%; margin-left: auto; margin-right: auto;" class="tablaPropuesta">
					                  	<!-- tasa periodo 2 -->
					                  	<tr><td  width="220px;">
					                  		<h:outputLabel value="Tasa de interés x periodo:" class="labelPropuesta"/>
					                  	</td><td  width="128px;">
					                  		<div class="resaltaSim">
					                  			<h:outputLabel value="#{simulator.tasaPeriodoPorc}%" />
					                  		</div>
					                  	</td></tr>
					            		 <tr><td>
					                  		<h:outputLabel value="Tasa anual:" class="labelPropuesta"/>
					                  	</td><td>
					                  		<h:outputLabel value="#{simulator.tasaTotal}%" class="valorPropuesta"/>
					                  	</td></tr>
					            		<tr><td>
					                  		<h:outputLabel value="Intereses:" class="labelPropuestaResalta"/>
					                  	</td><td>
					                  		<h:outputLabel value="$ #{simulator.interesStr}" class="propuestaCuota"/>
					                  	</td></tr>
					                  	<tr><td>
					                  		<h:outputLabel value="I.V.A." class="labelPropuestaResalta"/>
					                  	</td><td>
					                  		<h:outputLabel value="$ #{simulator.ivaInteresStr}" class="propuestaCuota"/>
					                  	</td></tr>
					                </table>
				                  </div>
				                  
			                  </td></tr>
			                </table>
			             </div>  
					</div>
					
					</h:panelGroup>
					
					<h:panelGroup id="simPnl" >
						<div id="contSimPnl" style="display: none; position: absolute; z-index: 3; top: 0px; right: 330px;">
							
							<div id="cont-sim" style="padding-top: 5px; padding-bottom: 5px;">
				
								<div id="meta-sim" style="padding-top: 5px; padding-bottom: 5px;">
									<div id="contFormSim" style="top: 0px; margin-top: 0px;">
										<div style="margin-bottom: 5px; margin-top: 10px;">¿Para qué lo utilizarás?</div>
												<h:selectOneMenu  styleClass="InputTexCl" value="#{simulator.purpose_id}">
													<f:selectItem itemLabel="Seleccione..." itemValue="" />
													<f:selectItems value="#{simulator.listPurpose}" var="purpose" itemLabel="#{purpose.name}" itemValue="#{purpose.purposePK.purpose_id}"/>
													<p:ajax event="change" immediate="true" />  
												</h:selectOneMenu>
												<br /><br />
												<div style="margin-bottom: 5px;">¿Cuánto necesitas?</div>
												<p:inputText size="15" styleClass="InputTexCl" onkeyup="format();" required="true" id="ammount" value="#{simulator.ammountStr}"  >
													 <p:ajax event="keyup" immediate="true" />  
												</p:inputText>
												<br /><br />
												<div style="margin-bottom: 5px;">¿A qué plazo deseas pagarlo?</div>
												 <div id="sliderSim">       
					                                         
					                            	 <h:panelGroup>  
												     	<h:outputText id="output" value="#{simulator.term_id}"></h:outputText>
												     	<h:outputText value="  meses"/> 
												     </h:panelGroup>   
													 <br /><br /> 
												      
												     <p:slider  for="output" minValue="3" maxValue="36"   style="width:170px"  >
												     	 <p:ajax event="slideEnd" immediate="true" update="output" listener="#{simulator.onSlideEnd}"></p:ajax>
												     </p:slider>  
												     
					                            </div> 
					                            
					                            <div style="margin-top: 0px; margin-bottom: 5px;">Frecuencia de pagos</div>
					                            <h:selectOneMenu id="frecuProyect" value="#{simulator.frequency_id}">
													<f:selectItem itemLabel="Seleccione Frecuencia" itemValue="" />
													<f:selectItems  value="#{simulator.listFrequency}" var="frequency" itemLabel="#{frequency.name}" itemValue="#{frequency.frequencyPK.frequency_id}"/>
													<p:ajax event="change"   immediate="true"/>  
												</h:selectOneMenu>						
											    
					                            
					                        <br />
					                        	
												<div id="callToActionSim">
													<div id="callDesc" class="puntero">
														¡Revisa tus beneficios!
													</div>
												</div>
									</div>
									
								</div>
								
							</div>
							
						</div>
					
					</h:panelGroup>
					
					
				 <div id="imgSim1" style="position:absolute; top: 30px; right: 200px;">
					<p:graphicImage url="../resources/img/presenta_kubo.png" width="80%" height="80%"></p:graphicImage>
				</div> 
			</div>	
					
		</div>
		
		<div id="satisfactorio">
			Su informacion ha sido guardada satisfactoriamente
		</div>
		
		<!-- <div id="contMsjSim">
			<div id="mnsjSim1">
				<!- - <p:commandLink actionListener="#{curatedController.irPreregistro}" id="actionComparaPreReg" styleClass="actionSim">
					Pide tu <br />préstamo<br /> ahora
				</p:commandLink> - ->
			</div>
			<div id="mnsjSim2" class="puntero">
				<!- - <p:commandLink actionListener="#{curatedController.irCompara}" id="actionComparaComp" styleClass="actionSim">
					Realiza<br /> otras <br />comparaciones
				</p:commandLink> - ->
			</div>
			<div id="mnsjSim3" class="actionSim">
				<!- - Recibe <br />esta <br />comparación <br />por mail - ->
			</div>
		</div> -->
		<!-- 
		<div id="mnsj1" style="width:130px; height: 110px; position: absolute; left:  80px; top: 150px; background-image: url('../resources/img/simulador-2.png'); padding: 25px 15px 15px 15px; font-size:1.4em; font-weight: bold; text-align: center; background-repeat: no-repeat; color: #868789;">Con kubo te ahorrarias $5,000</div>
		<! - - <div id="mnsj2" style="width:195px; height: 110px; position: absolute; left: 245px; top: 190px; background-image: url('../resources/img/simulador-3.png'); padding: 25px 15px 15px  8px; font-size:1.4em; font-weight: bold; text-align: center; background-repeat: no-repeat; color: #868789;">Con la misma cuota kubo te prestaría $10,000</div> - ->
		<div id="mnsj3" style="width:185px; height: 115px; position: absolute; left: 245px; top: 190px;/*340px;*/ background-image: url('../resources/img/simulador-4.png'); padding: 44px 20px 15px 20px; font-size:1.6em; font-weight: bold; text-align: center; background-repeat: no-repeat; color: #333333;"><i>¿Ya pensaste que harías con todo ese dinero?</i></div>
		-->
		<input type="hidden" id="numero" value="1"></input>
		<input type="hidden" id="isVisible" value="0"></input>
		
		<div style="display: none;">
			<div id="formAmort" style="margin-left: auto; margin-right: auto; width: 100%; height:450px; overflow:auto; padding: 0px 0px 0px 0px;" >
				<div id="titAmort">Tabla de Amortización</div>
				<h:outputText id="tableAmort" escape="false" value="#{simulator.tableAmort}"></h:outputText>
			</div>
		</div>
		
		</h:form>
		
		<div id="footer" style="width: 100%; magin-right: 0px;">
			<ui:include src="templates/footerContenido.xhtml" /> 
		</div>
		<div style="display: none;">
			<div id="formRegistro" style="margin-left: auto; margin-right: auto; width: 98%; height:450px; padding: 0px 0px 0px 0px;" >
				<ui:include src="templates/preRegForm.xhtml" />
			</div>
		</div>
		
		
		<div style="display:none; ">
			<h:form id="formSim2">
				<p:commandLink id="actionClear" actionListener="#{simulator.clearSim}" ajax="true" update=":form_Prin:simPnl"></p:commandLink>
				<p:commandLink id="actionMail" actionListener="#{simulator.sendMail}" ajax="true" update=":form_Prin:propuestaPnl"></p:commandLink>
				<p:commandLink id="actionSave" actionListener="#{simulator.saveSimulator}" ajax="true" update=":form_Prin:propuestaPnl"></p:commandLink>
				<p:commandLink id="actionAmort" actionListener="#{simulator.creaTablaAmort}" ajax="true" update=":form_Prin:tableAmort"></p:commandLink>
				<p:commandLink id="actionCalculate" actionListener="#{simulator.simulaCred}" ajax="true" update=":form_Prin:propuestaPnl"></p:commandLink>
			</h:form>
		</div>
	</h:body>
</html>